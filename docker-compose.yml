version: "3.8"

services:
    # MySQL Database
    mysql:
        image: mysql:8.0
        container_name: booking_sport_mysql
        restart: unless-stopped
        environment:
            MYSQL_DATABASE: booking_sport
            MYSQL_ROOT_PASSWORD: root
            MYSQL_PASSWORD: password
            MYSQL_USER: booking_sport
        ports:
            - "3306:3306"
        volumes:
            - mysql_data:/var/lib/mysql
        networks:
            - booking_sport_network

    # Redis for caching and queues
    redis:
        image: redis:7-alpine
        container_name: booking_sport_redis
        restart: unless-stopped
        ports:
            - "6379:6379"
        volumes:
            - redis_data:/data
        networks:
            - booking_sport_network

    # Mailpit for local email testing
    mailpit:
        image: axllent/mailpit
        container_name: booking_sport_mailpit
        restart: unless-stopped
        ports:
            - "1025:1025" # SMTP port
            - "8025:8025" # Web UI port
        networks:
            - booking_sport_network

volumes:
    mysql_data:
        driver: local
    redis_data:
        driver: local

networks:
    booking_sport_network:
        driver: bridge
